!function(t,e){"use strict";"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.Accordion=e()}(this,function(){"use strict";function t(e,i){this.elem=e,this.options=_.extend(t.options,i),this.children=this.elem.getElementsByClassName(this.options.itemClass),console.log("accordion fn"),this._init()}return t.prototype={constructor:t,_init:function(){return console.log("accordion proto init"),console.log(t.cutsTheMustard),this.children?(setTimeout(this.attachEvent.bind(this),100),console.log(this),this):void console.log("no children in accordion with class: "+this.options.itemClass)},closeOpenItems:function(t){_.forEach(t,function(t){var e=t.getElementsByClassName(this.options.btnClass)[0];this.toggleItem(t,e)}.bind(this))},toggleItem:function(t,e){console.log(t),console.log(e);var i=Utils.strToBool(e.getAttribute("aria-expanded"));if(this.options.allowMultipleOpen||i){if(!this.options.allowToggleOpen&&i)return!0}else{var s=this.elem.getElementsByClassName(this.options.openClass);0!=s.length&&this.closeOpenItems(s)}t.classList.toggle(this.options.openClass,!i),e.setAttribute("aria-expanded",!i);var o=t.nextElementSibling;console.log(o),o.setAttribute("aria-hidden",i),o.style.maxHeight=i?"0px":o.scrollHeight+"px"},itemEvent:function(t,e){if(!Utils.clickKeydownChecker(t)){var i=t.target||t.srcElement;i.classList.contains(this.options.btnClass)&&(t.preventDefault(),console.log("button clicked"),this.toggleItem(e,i))}},attachEvent:function(){this.initialised||(this.initialised=!0,_.forEach(this.children,function(t){Utils.addListener(t,"click keydown",function(e){this.itemEvent(e,t)}.bind(this))}.bind(this)))},destory:function(){}},t.options={itemClass:"accordion__item",btnClass:"accordion__btn",openClass:"is-open",allowMultipleOpen:!0,allowToggleOpen:!0},t.cutsTheMustard=void 0!==Utils.features&&Utils.features.rAF&&Utils.features.bind&&Utils.features.classList,t});